# ----------     leetcode 560,  count of subarrays with sum equals to k -------------

from collections import defaultdict
class Solution:
    def subarraySum(self, nums: List[int], k: int) -> int:

        ps = defaultdict(int)
        ps[0] = 1 
        current_sum = 0
        count = 0 

        for num in nums:
            current_sum +=num 
            required_sum = current_sum-k
            if required_sum in ps:
                count+=ps[required_sum]
            ps[current_sum] +=1 
        return count 
    

print(Solution.subarraySum([1,1,1], 2))     # 2

print(Solution.subarraySum([1,2,3], 3))     # 2

print(Solution.subarraySum([1,-1,0], ))     # 3
     
# --------------- print subarrays with sum k ------------

from collections import defaultdict
class Solution:
    def subarraySum( nums, k):

        ps = defaultdict(list)
        ps[0] = [0]             #sum o to with subarray ending index upto 0
        current_sum = 0

        subarrays = []
        
        for i in range(len(nums)):
            current_sum += nums[i] 
            required_sum = current_sum -k 
            if required_sum in ps:
                for index in ps[required_sum]:
                    subarrays.append(nums[index:i+1])
            ps[current_sum].append(i+1)
            print(ps)

        return subarrays
    


print(Solution.subarraySum([1,1,1], 2))         # [[1,1],[1,1]]

print(Solution.subarraySum([1,2,3], 3))         #[[1,2],[3]]

print(Solution.subarraySum([1,-1,0], ))         #[[1,-1],[1,-1,0],[0]]

print(Solution.subarraySum([3,4,-7,1,3,3,1,-4], 7))  #  [[3, 4], [3, 4, -7, 1, 3, 3], [1, 3, 3], [3, 3, 1]]

# ------------ gemini ans to print subarrays ----------

from collections import defaultdict
class Solution:
    def subarraySum( nums, k):

        ps = defaultdict(list)          #prefix sum to indices mapping 
        ps[0].append(-1)          
        current_sum = 0

        for i,num in enumerate(nums):
            current_sum+=num 
            required_sum = current_sum-k 
            if required_sum in ps:
                for start_index in ps[required_sum]:
                    subarray = nums[start_index+1 : i+1]
                    print(f"Subarray: {subarray} (Indices: {start_index + 1} to {i})")

            ps[current_sum].append(i)            
    
nums = [3,4,-7,1,3,3,1,-4]
k = 7
print(Solution.subarraySum(nums, k))

# Subarray: [3, 4] (Indices: 0 to 1)
# Subarray: [3, 4, -7, 1, 3, 3] (Indices: 0 to 5)
# Subarray: [1, 3, 3] (Indices: 3 to 5)
# Subarray: [3, 3, 1] (Indices: 4 to 6)


#  https://learnersbucket.com/examples/algorithms/subarrays-with-a-given-sum-k-in-an-array/  to solve it in js

# ========== my approach ==============
# 1. first tried to use cumultative sum and traversing cumulative sum from backwards and counting 
# =============== leetcode 560 total no of subarray sum equeal k=================



# ------- 3 test cass passed 

# Example 1:
# Input: nums = [1,1,1], k = 2
# Output: 2

# Example 2:
# Input: nums = [1,2,3], k = 3
# Output: 2

# Example 3:
# Input: nums = [-1,-1,1], k = 0
# Output: 2


# -------------- bruteforce method, passed 61/93 test cases ---------

class Solution:
    def subarraySum(self, nums: List[int], k: int) -> int:

        count=0
        for i in range(len(nums)):
            for j in range(i, len(nums)):
                if sum(nums[i:j+1])== k:
                    count+=1
                    # print( nums[i:j+1])

        return count 


# got time limit exceeded error for this input which is very large length array inputs as we are using n**2

# nums = [217,-315,-999,-537,116,46,971,31,-978,-796,-613,80,-668,952,505,306,-405,884,435,-795,89,539,170,-963,360,-27,699,951,440,-163,-996,820,-548,400,-898,803,-771,-263,9,-201,661,881,-152,-173,966,406,-944,95,66,371,-202,-950,-532,-397,-662,-403,-21,-924,583,535,53,784,-75,750,924,-108,-95,-676,-525,278,699,915,908,-454,295,343,782,-478,699,801,-716,-322,555,583,-885,-437,-982,208,-486,618,1,-58,451,-965,-887,911,591,-639,-362,844,-726,-37,719,200,-943,-61,-211,636,963,-388,111,34,-160,-605,-458,569,26,-91,472,221,661,-172,253,-580,686,731,56,373,-355,859,-156,86,914,171,-654,-136,-523,-7,748,771,82,211,631,-796,-259,-29,552,-243,-842,-60,423,324,-383,281,-806,692,-152,-356,-320,-163,-156,142,689,-222,-156,-860,-708,235,834,-336,-329,-844,941,510,325,969,642,-498,887,671,931,750,-127,936,527,-990,-587,-337,-308,48,874,-276,-204,-28,173,970,-983,-971,236,541,-51,-735,-703,-959,-187,-628,-694,137,518,-491,-771,58,428,-354,-913,-23,-391,52,-569,-299,-632,-91,985,-32,661,-65,917,913,711,-361,259,575,233,-30,923,-421,793,31,358,-234,111,-302,200,869,441,-883,-224,-555,585,643,-891,317,97,-809,-938,145,754,448,-548,320,-49,813,-531,-816,451,-930,-338,-558,-583,-188,491,-668,-259,-518,85,225,881,-818,-669,-561,-726,556,625,456,894,-758,198,-912,382,857,-674,89,588,-396,197,-180,-745,-475,-19,-585,30,-717,-711,230,-698,-479,856,792,-318,-377,-560,704,868,73,365,826,154,637,772,868,-625,-52,-133,328,-862,-388,-465,-108,821,-837,-360,332,63,-487,-901,-95,-826,-354,299,-583,-756,969,940,-61,-740,769,181,-250,-920,-35,447,547,-379,-959,-139,339,-405,553,-728,110,256,62,-407,-768,416,-695,-532,-835,-146,-40,-562,-758,204,-143,90,421,607,681,-221,-691,-544,-643,-105,609,525,422,313,-553,795,-251,215,-290,529,366,-610,-128,66,-264,-105,595,-515,592,828,-31,137,-764,-594,795,610,-731,-604,742,-605,-160,613,429,-963,514,-479,-13,193,64,157,-167,27,96,275,121,-234,511,586,-923,-18,-733,674,-391,-715,-917,-48,106,966,-146,-570,850,-780,563,-892,879,175,-902,-431,-593,-186,650,-466,624,-732,-257,728,-557,533,318,308,-914,489,-526,840,-120,268,583,612,-853,793,451,520,-589,661,-224,-594,261,760,-868,-962,931,290,-562,-315,122,-968,-149,-719,482,929,597,228,-75,-675,-136,51,191,-685,254,612,-271,-987,933,15,418,247,-394,723,462,-615,949,131,761,-977,-788,-816,710,-982,-219,249,484,125,-318,-821,403,597,783,-15,-480,-716,-618,534,-788,970,-88,-993,-353,-871,-938,919,-339,-657,-154,-180,-555,-525,-443,-408,-748,379,836,-404,215,-8,616,300,-250,-836,-689,-299,872,570,-370,944,52,-894,210,353,-495,501,-660,-179,283,-977,-725,85,-775,38,-809,-328,-265,151,131,703,-817,397,542,299,576,-368,782,-439,-649,207,964,208,-768,929,-120,891,-31,-291,349,-601,288,449,521,130,317,200,-417,-717,34,628,283,-947,-239,-432,-455,-234,48,-44,-59,-898,287,796,701,-612,-523,923,876,854,123,893,890,656,522,477,591,323,834,744,-16,-764,177,517,613,633,-122,-585,-813,401,375,-122,-980,-554,-393,-816,884,227,881,894,-596,-693,450,311,78,-357,-93,-385,-174,592,-258,724,-973,-284,814,-308,-629,-138,-934,-380,793,831,764,849,-332,333,-351,-110,313,-647,271,-124,55,-231,-138,-231,31,-538,-826,-613,-103,-506,-109,-296,-949,298,549,-628,-332,623,-433,498,229,-324,322,-993,-880,139,-685,483,-901,-843,558,-200,-325,360,-805,122,989,757,-743,746,961,-771,941,344,726,918,59,646,824,-427,933,443,353,-517,144,-503,848,-937,212,702,493,613,231,-24,146,239,-617,-20,53,841,967,572,235,-167,307,-258,728,-273,57,99,898,66,-470,-163,5,164,796,461,-986,635,-372,245,170,663,866,-661,-526,650,-762,-965,352,88,-435,922,-963,-847,-886,-4,-490,-934,-18,-275,-67,802,33,-746,-647,465,945,899,528,197,473,441,355,-71,-20,668,986,889,-195,-831,-856,390,-911,-911,714,-456,941,735,98,-328,-455,-597,-282,516,-737,-554,-753,-951,924,816,528,21,217,-908,-380,-50,773,280,-820,-961,171,-981,144,-542,355,677,44,246,857,-316,351,777,-460,440,361,254,34,652,-362,-971,-860,762,-692,-949,-318,164,546,-768,862,-213,-80,727,698,646,209,394,735,-763,210,323,-56,303,434,-153,693,925,4,203,3,123,556,-377,-697,-793,-267,-341,-562,900,-516,-455,-609,-645,-753,270,-605,-215,474,800,818,507,591,163,705,-982,-837,-889,-390,-139,-575,-47,451,-204,-699,68,567,-486,-839,-107,-739,847,717,-706,-194,-849,-574,-254,423,957,-360,-176,133,640,609,-997,-179,-975,-453,-571,445,-161,-213,468,927,175,120,-68,-170,-506,78,-872,-412,-99,617,776,-984,-293,912,-497,-772,187,-631,196,-105,-103,-583,776,320,-585,729,304,251,-697,603,
# k= -93

# -----------------------------------
class Solution:
    def subarraySum(self, nums: List[int], k: int) -> int:
        count=0
        sum = 0 
        sums_list = []
        for num in nums:
            sum+=num
            sums_list.append(sum) 

        left = 0 
        right = 0
        while right<len(nums):
            print(sums_list[right])


            
            if sums_list[right] ==k:
                count+=1 
                # l= left
                # r = right 
                #check in the range(l,r) 
            
            elif right-left>=1:
                l = left
                r = right
                while l<r:
                    if sums_list[r]-sums_list[l] ==k:
                        count+=1
                    l+=1
                

            right+=1

        return count

# failed for testcase nums= [1,-1,0] k=0 ----- above code giving ans=2 but right ans  = 3 understand the difference -------------------


# -------------- above 4  test cased passed, 75/93 test cases passed ---------------------c



class Solution:
    def subarraySum(self, nums: List[int], k: int) -> int:
        count=0
        sum = 0 
        sums_list = []
        for num in nums:
            sum+=num
            sums_list.append(sum) 

        left = 0 
        right = 0
        while right<len(nums):
            if sums_list[right] ==k:
                count+=1 
                l = left
                r = right
                while l<r:
                    if sums_list[r]-sums_list[l] ==k:
                        count+=1
                    l+=1
            
            elif right-left>=1:
                l = left
                r = right
                while l<r:
                    if sums_list[r]-sums_list[l] ==k:
                        count+=1
                    l+=1
                

            right+=1

        return count







#  failing for the below input giving time limit exceded error
nums = [-962,986,813,664,421,511,38,-332,784,734,-883,-56,552,199,-565,-502,197,868,459,857,776,148,-896,-940,-661,-90,229,-329,437,810,789,828,900,232,418,-571,458,-953,170,552,695,247,802,391,-37,-335,-564,290,460,-52,832,365,850,955,613,-341,-236,-998,184,-391,-15,-236,-224,-1,403,947,247,610,289,-546,-390,-363,324,-396,710,-310,-696,675,705,870,-997,-163,-201,294,-992,902,468,-186,-529,-303,-363,-961,708,246,-872,763,-583,478,368,572,-769,-839,-225,-630,-720,-870,934,-444,-231,395,848,251,301,-127,281,434,630,43,262,-42,-907,64,-69,-128,-477,30,-93,574,-909,-194,-680,696,-418,614,-328,-875,881,-254,-460,-683,117,845,710,600,894,553,-978,-858,894,655,78,-570,-610,-118,366,935,97,-77,868,-765,334,-4,872,-111,111,-176,100,-927,626,-812,-232,943,-936,786,852,617,-155,211,75,-324,-116,-903,432,-457,-415,79,-115,-454,970,-420,244,-595,794,-251,732,-535,745,914,502,570,856,-301,247,492,-692,575,-296,312,817,449,-776,34,894,470,-21,-414,-302,182,-540,408,345,598,-688,177,43,867,78,-644,143,-987,595,297,-344,632,707,-925,752,-593,85,39,-101,120,-899,865,-210,-94,915,-234,783,-451,-964,311,-714,280,744,333,677,937,-313,859,325,835,541,519,802,-660,807,-339,471,-521,-297,-172,-404,985,561,570,-302,484,13,-405,219,285,126,148,689,474,634,979,-809,-855,-641,-665,199,387,-461,247,101,-139,-162,33,538,539,-412,-874,-580,-75,-893,862,782,-639,943,-100,-742,985,-570,998,537,748,181,-121,-652,-483,-510,548,-404,-664,226,244,126,90,913,-759,-913,573,646,537,-743,886,30,-71,649,710,-921,480,-607,-218,781,-366,774,352,259,691,-86,-333,-440,18,-8,947,168,-256,469,-354,-764,-562,79,865,-8,-510,-392,619,962,-860,-633,278,-677,73,-775,529,-373,-186,-285,-611,-290,-938,205,-485,-718,537,-57,-124,-485,984,7,444,-229,-974,317,244,-871,-749,-567,-756,-674,-507,-705,936,862,-661,393,-6,-440,781,379,289,770,790,736,-304,-401,-995,-343,134,607,-598,929,-721,-117,352,-450,-663,891,262,-471,737,-236,-166,-497,5,408,-116,-221,0,657,-808,16,633,786,319,-926,-761,126,-842,-751,227,449,461,845,135,632,-152,-106,-833,-842,-600,-839,-268,586,449,961,-612,726,762,181,-413,-398,-990,-42,-551,378,993,771,-92,-724,739,-882,36,773,-758,-21,-198,5,598,-245,904,-508,156,-73,-221,677,-755,917,-612,-533,-945,524,183,507,362,945,-921,-291,-493,366,-519,773,777,481,920,-15,-670,-805,-146,128,744,276,635,-785,-550,-624,-614,578,249,-325,-329,-476,-294,-945,-962,718,-678,-859,-501,-563,-105,-64,331,-950,-835,-764,-159,383,301,-314,472,648,-769,975,-508,-768,812,757,-537,-723,566,447,532,396,-350,-39,-635,589,-869,301,575,393,346,-51,-2,535,405,551,544,-417,-947,-649,-736,737,95,-28,695,-493,-662,-453,-498,145,264,633,688,-101,414,-923,-659,-384,891,840,-419,143,-227,-384,-257,753,920,-148,-882,-276,958,-516,10,-382,78,-176,127,-156,-227,9,-729,-977,-446,565,-613,-505,-215,346,916,-853,-433,598,-924,463,-797,990,866,-280,16,-313,676,-957,5,931,918,407,-543,-935,281,756,-289,185,-901,-900,16,-452,-756,849,-82,529,295,19,985,-388,-552,612,-618,-336,524,-864,266,70,955,904,-905,-163,-606,744,562,-775,56,-386,517,227,-678,847,-696,448,186,-568,-734,657,167,-342,-150,213,-358,-653,896,269,918,191,-114,633,-841,903,-434,-226,-738,634,-630,-298,832,-92,-318,-778,116,-436,-880,-459,233,734,-988,-826,-477,-366,965,-633,-605,-334,-168,354,-444,526,289,-803,-313,854,573,-765,-878,-5,707,-180,-61,-379,-419,187,729,-740,21,894,-975,-98,-288,-488,-732,-37,529,-672,-433,610,-366,-680,-598,-418,-400,269,-531,53,-705,-201,275,352,77,-75,268,57,-754,-404,-570,-617,-671,378,634,6,-407,-681,933,-276,-130,-468,153,271,565,-621,18,-485,755,521,-805,697,-892,-575,585,-90,-503,85,-685,741,107,-477,314,837,647,-984,-702,-613,-336,-66,-432,161,413,-465,-503,458,412,60,695,907,-957,-777,-654,-907,645,112,4,-25,-559,-751,-289,116,144,-27,628,612,500,-730,-485,270,-485,-558,482,272,-130,-968,215,-648,626,967,-533,321,-335,984,-987,971,-247,-711,857,-20,160,624,-777,-501,923,736,263,427,669,721,-3,-606,-852,32,543,385,523,-468,-608,-406,583,-51,835,-149,330,-506,71,-378,-270,570,644,553,700,-36,44,344,-367,-227,130,-584,269,432,-650,-418,575,693,-989,-693,-942,452,-474,252,-965,251,514,260,526,887,514,249,-54,432,-449,-673,-328,-396,5,231,-654,-941,536,-772,-307,107,-325,671,-111,456,-851,-630,-112,711,-21,-125,462,-559,-865,228,922,258,-565,82,-780,-568,760,558,-973,895,435,258,958,604,628,-995,-14,-986,933,587,-496,835,924,545,574,882,39,-724,596,-929,56,-987,-829,810,0,-149,-679,-436,-521,814,591,-138,995,-683,379,230,259,706,-787,-930,199,-258,777,-511,-760,970,-521,-496,936,-953,894,512,945,158,-417,965,110,-256,194,-494,871,611,-158,609,643,83,131,-131,163,-655,-778,941,-560,759,-878,215,272,-41,-213,-793,774,-999,-880,889,-186,574,-871,-660,-391,129,142,134,-706,-460,-316,488,-895,414,-624,6,-875,-619,898,-159,315,361,544,-881,-587,-530,125,369,-927,-166,-315,-662,88,-703,-996,654,-32,387,604,-384,663,932,427,-667,464,-128,123,712,-199,123,-951,111,44,-871,119,107,-25,-77,265,373,70,886,-92,-475,927,-820,731,479,-758,117,-953,-654,-949,-328,-971,-158,-713,686,956,-462,-762,273,-501,-501,-113,-411,-11,840,296,-243,631,235,-448,228,-188,-328,478,706,357,-438,-46,-914,346,-732,814,966,845,290,-275,398,-621,228,440,47,778,-4,271,-929,-505,359,-434,114,845,707,-410,-16,581,986,-567,-440,315,666,61,394,484,-794,809,404,-446,-736,768,280,544,305,-771,-733,-623,-925,-542,-373,265,-131,34,-743,-427,930,87,-870,275,355,577,-802,538,-285,585,492,469,-379,204,866,-207,919,-994,-721,860,-280,-617,-711,-149,105,-516,-276,-132,390,-43,-501,-69,-15,56,-525,243,-673,-635,-95,-402,448,-541,471,-276,-114,-573,482,395,-94,-123,300,-172,-859,-357,-714,-674,-53,791,-424,-479,186,657,-728,952,447,471,-379,855,170,504,431,-872,-807,156,110,-66,653,482,632,292,226,480,-731,-270,-211,-407,729,-954,-234,165,-139,-279,328,-386,-306,-264,-808,663,-762,-823,-106,362,-963,884,-685,893,-969,997,912,-925,271,-581,139,711,-33,-122,5,-452,295,489,371,-177,975,-794,411,946,-291,-848,-801,-5,-568,-965,-545,-84,152,-338,-437,-595,-531,504,73,-383,309,-425,-580,16,-778,-715,-808,-280,-228,840,362,-590,-48,129,879,132,-61,672,-828,369,274,867,-118,482,-5,655,305,703,799,-361,931,-800,170,252,733,786,-687,-533,-781,475,-731,-309,550,344,-833,729,232,885,728,-343,861,-704,895,-647,248,787,557,884,261,424,-186,-461,-192,95,650,-343,-682,-106,679,277,624,-490,40,-644,-393,24,-566,-644,-530,-136,411,-449,772,-139,881,660,876,795,646,852,891,404,-390,-568,-406,-161,757,165,541,550,-224,-748,-559,-757,-94,-756,550,-871,-432,275,-158,-318,641,-529,-807,609,50,744,-566,-732,907,-341,-127,-44,119,456,403,-430,959,806,-769,731,-938,359,753,-53,-253,915,-703,-246,-548,845,-891,703,-750,78,939,311,82,-128,-522,-256,-281,58,-552,-719,132,986,589,501,52,788,-685,107,-381,-724,43,439,126,368,-605,-233,-594,-996,41,-740,588,-739,431,-342,-575,574,-151,578,-110,860,738,-446,69,992,326,113,613,828,162,-177,-786,-760,76,-403,-23,970,446,599,865,-367,-153,-810,981,-84,395,69,633,-48,524,-135,12,-803,-629,-643,-298,-735,666,850,-366,570,635,-513,-347,-55,-706,-998,-809,-754,-625,588,613,478,-484,814,821,183,67,-340,331,809,-271,505,-916,-632,33,583,322,630,-460,-657,-606,776,-690,946,102,-171,699,-514,958,453,901,-83,-326,684,-188,742,-842,818,-604,736,-61,-105,-998,393,486,-852,-135,328,784,-583,666,931,-889,-467,-437,-691,286,635,-940,478,-583,744,886,-271,691,72,-337,678,259,182,-165,-725,366,-514,69,641,70,-969,271,-120,754,625,-232,-980,-901,-64,-983,71,-343,222,-284,834,619,-273,-744,-104,-33,411,-89,-945,780,321,-336,886,264,310,976,-640,-682,-439,54,-275,-370,661,198,303,-607,714,931,-328,681,-781,-337,-513,-89,334,-817,-941,-507,-41,-213,90,-935,-285,-566,410,694,-771,-391,790,-372,154,823,88,576,740,595,79,570,-116,-530,-422,799,168,-865,-884,583,508,-403,-83,-995,528,-869,-157,-10,394,176,-726,86,-446,-353,-808,-173,-427,-686,120,734,-600,115,439,595,-225,734,-941,371,-124,-257,-59,-162,-396,-625,486,-38,-673,-892,89,147,927,872,770,521,-648,-279,28,-990,-470,183,777,-279,144,212,58,-442,-489,-133,-522,871,634,1,-253,-992,139,-995,-855,579,-741,-638,385,264,406,-340,-551,-461,-194,122,-342,365,633,211,-445,112,508,689,320,131,-700,724,-127,-586,600,344,-587,246,-626,-133,333,-535,531,-678,829,995,-956,787,126,909,143,152,-216,-525,600,-136,664,-320,-619,714,560,-990,915,-238,917,364,933,-336,-859,381,614,609,-502,-658,600,642,-424,56,248,595,295,-424,849,519,376,-351,937,-783,396,287,241,-185,979,-31,-484,-905,447,-306,-824,-590,-378,777,533,349,127,-45,658,814,682,908,-159,383,215,-906,549,-398,-366,-270,-761,228,395,-704,-723,-258,243,961,-230,502,-460,-445,101,-496,69,664,982,-134,277,140,-370,-113,-603,-233,-45,-406,-845,81,134,-927,-80,1,937,-1,442,-889,-522,571,-507,267,931,-252,-768,721,-263,-572,26,-81,653,-268,283,441,-60,983,-888,-965,376,-795,-295,444,952,-889,578,971,327,-370,-39,915,-197,-943,605,744,427,113,-155,681,-900]
k=998

for this input also if ran as seperate test cases we are getting the correct ans, but when submitting the ans it is showing time limit exceeded to complete all 93 test cases 


# ---------------- 87/93 test cases passed with below code ------------------ 
#  extra while loop deleted as it is unnecessary

class Solution:
    def subarraySum(self, nums: List[int], k: int) -> int:
        count=0
        sum = 0 
        sums_list = []
        for num in nums:
            sum+=num
            sums_list.append(sum) 

        left = 0 
        right = 0
        while right<len(nums):
            if sums_list[right] ==k:
                count+=1 
            l = left
            r = right

            x = sums_list[r] -k 
            if x  in sums_list[l:r]:
                y = sums_list[l:r].count(x)
                # print(x,y,count)
                count+=y 

            right+=1

        return count

# ------ time limit exceeded for the below test case
# nums = [0,0,1,1,1,1,1,1,1,1,0,1,1,0,1,1,1,1,0,1,1,1,0,1,1,1,1,0,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,0,1,1,1,0,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0,0,1,1,1,1,1,1,1,0,1,1,1,0,1,1,1,1,0,1,1,1,1,1,1,0,1,1,0,0,1,1,1,1,0,0,1,1,0,1,1,1,0,1,0,1,1,1,1,0,1,1,1,1,1,1,0,1,1,0,1,0,0,1,0,0,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,0,1,0,1,1,1,1,0,0,0,1,1,1,0,1,1,1,0,0,0,1,1,1,0,1,1,1,1,1,0,1,1,1,1,1,1,1,0,1,1,1,0,1,0,1,1,0,1,1,1,1,0,1,1,0,0,1,1,1,1,0,1,1,1,0,0,1,1,0,0,0,1,1,0,1,1,0,0,1,1,1,1,1,0,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,1,1,0,1,1,0,1,0,0,0,1,0,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,0,1,1,1,0,1,0,1,1,1,1,1,1,0,0,1,1,0,1,1,0,0,0,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,0,1,1,1,1,1,1,0,1,0,1,0,1,0,0,1,1,1,1,0,1,1,

class Solution:
    def subarraySum(self, nums: List[int], k: int) -> int:
        count=0
        sum = 0 
        sums_list = []
        for num in nums:
            sum+=num
            sums_list.append(sum) 
        # print(sums_list)
        left = 0 
        right = 0
        while right<len(nums):
            if sums_list[right] ==k:
                count+=1 
            l = left
            r = right

            x = sums_list[r] -k 
            if x  in sums_list[l:r]:
                y = sums_list[l:r].count(x)
                print(left,right, sums_list[right],k,x,y,count)
                count+=y 

            right+=1

        return count

# in the above code the major redundancy is for every x we are counting its frequency value y in the range sums_list[l:r] multiple times, we can optimize it by using hashmap. {difference: difference count} => {0:2, 1:1, 2:4, 3:1, 4:1, 5:2, }

       sl[r]-k 
l r        k  x y count 

0 180 143 143 0 2 1         x=0, this differnce count y is 2 that is present at the starting of sums_list
0 181 144 143 1 1 3
0 182 145 143 2 1 4
0 183 145 143 2 1 5
0 184 145 143 2 1 6
0 185 145 143 2 1 7         even though 2 is present only once in sums_list => as r increases, sums_list[r] may be getting same value, in here 145 as we can see 145 is repeated 4 times in the sums_list and output trace also, so diff x=1 came 4 times, 
0 186 146 143 3 1 8
0 187 147 143 4 1 9
0 188 148 143 5 1 10
0 189 148 143 5 1 11
0 190 149 143 6 1 12
0 191 150 143 7 1 13
0 192 151 143 8 2 14
0 193 151 143 8 2 16
0 194 151 143 8 2 18
0 195 151 143 8 2 20
0 196 152 143 9 1 22
0 197 153 143 10 2 23



    

# ----------------  final answer  for count -----------------


from collections import defaultdict
class Solution:
    def subarraySum(self, nums: List[int], k: int) -> int:

        ps = defaultdict(int)
        ps[0] = 1 
        current_sum = 0
        count = 0 

        for num in nums:
            current_sum +=num 
            required_sum = current_sum-k
            if required_sum in ps:
                count+=ps[required_sum]
            ps[current_sum] +=1 
        return count 


# --------- for subarrays ----------------

from collections import defaultdict
class Solution:
    def subarraySum(self, nums: List[int], k: int) -> int:

        ps = defaultdict(list)
        ps[0] = [0]             #sum o to with subarray ending index upto 0
        current_sum = 0
        count = 0 
        
        #count 

        # for num in nums:
        #     current_sum +=num 
        #     required_sum = current_sum-k
        #     if required_sum in ps:
        #         count+=ps[required_sum]
        #     ps[current_sum] +=1 
        # return count 

        #subarrays

        subarrays = []
        
        for i in range(len(nums)):
            current_sum += nums[i] 
            required_sum = current_sum -k 
            if required_sum in ps:
                for index in ps[required_sum]:
                    subarrays.append(nums[index:i+1])
            ps[current_sum].append(i+1)
            print(ps)

        return subarrays
            




    